define("modules/js/drawer",function(t){var o=t("components/zepto/main");if(!s)var s=function(){function t(){var t=this.options.open.minZIndex;return o(".ltCont .ltLayer").each(function(){var s=parseInt(o(this).css("z-index"));s>t&&(t=s)}),t}var n=function(){var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var o in t)if(void 0!==document.documentElement.style[o])return t[o]}(),e={is_options_valid:function(t){return t&&t.model&&1===t.model[0].nodeType?!0:!1},switchClass:function(t,o){this.removeClass(t).addClass(o)}},i={model:null,dimens:{height:"auto",width:"auto"},resetForm:!1,fixed:!1,zLayer:!0,open:{minZIndex:999,success:function(){},event:"click",selector:null,anim:""},close:{esc:!0,layer:!0,nodes:{target:"",event:"click",selector:""},success:function(){},returnFocus:!0,anim:""}},l=function(){var t=o('<div class="ltCont close"></div>').attr("tabIndex",0),s=o('<div class="ltLayer close"></div>');return t.append(s),o(window).on("resize",function(){if(l.stack.length){var t=l.stack[0];t.resize()}}),o("html").keydown(function(t){27===t.keyCode&&l.stack.length&&l.stack[0].options.close.esc&&l.stack[0].close()}),s.click(function(t){t.stopPropagation(),l.stack[0].close_target=this,l.stack.length&&l.stack[0].options.close.layer&&l.stack[0].close()}),{stack:[],cont:t,layer:s}}();o("body").append(l.cont);var c=function(){this.options.model.css({position:this.options.fixed?"fixed":"absolute",width:this.options.dimens.width,height:this.options.dimens.height})},a=function(t){this.options=o.extend(!0,{},this.default_opt,t)},r=function(){var t=this.options.model.parent();t.hasClass("ltCont")||l.cont.append(this.options.model)},h={open:function(){var t=[this.options.close.anim,this.options.open.anim];e.switchClass.apply(this.options.model,t)},close:function(){var t=[this.options.open.anim,this.options.close.anim];e.switchClass.apply(this.options.model,t)}},d=function(){var t=document.documentElement.scrollTop,o=this.options.open.firstFocus;o?o.focus():l.cont.focus(),document.documentElement.scrollTop=t},p=function(){if(this.options.resetForm)for(var t=this.options.model.find("form"),o=0;o<t.length;o++)t[o].reset()},u=function(){if(!l.stack.length){var t=this.options.close.returnFocus;t===!0?this.options.trigger.focus():o(t).focus()}},f=function(){if(this.options.model.removeClass("model_open"),l.stack.length){var t=l.stack[0];this.options.zLayer&&l.layer.css("zIndex",t.options.model.css("zIndex"))}else l.cont.addClass("close");u.call(this),p.call(this),this.options.close.success.call(this,this.close_target)},m=function(){var t=this;t.state="close",this.openEventHandler=function(){t.open()},this.options.trigger.on(this.options.open.event+"."+this.pluginName,this.options.open.selector,this.openEventHandler),v.call(this,this.options.close.nodes)},v=function(t){var s=this;this.close_target=null;var n=null;"array"===o.type(t)?(n=o.extend({},this.default_opt.close.nodes),n.target=t):n={target:o(t.target),event:t.event,selector:t.selector},n.target.on(n.event,n.selector,function(){s.close()})},g=function(t){a.call(this,t),this.init_structure(),c.call(this),m.call(this),this.options.model.addClass(this.options.close.anim)},y=function(){this.options.trigger.off(this.options.open.event+"."+this.pluginName)},w=function(){this.options.trigger.off(this.options.open.event,this.openEventHandler)},k=function(){this.options.trigger.on(this.options.open.event,this.openEventHandler)},C=function(){s.lt.cont.css({width:"auto",height:"auto"});var t=o(document).height(),n=o(document).width();s.lt.cont.css({width:n+"px",height:t+"px"})},_=function(){this.state="open",this.options.model.addClass("model_open"),this.options.model[0].model=this;var s=t.call(this);this.options.zLayer&&l.layer.css("zIndex",s+3),"drawer"!=this.pluginName&&this.options.model.css("zIndex",s+3),l.stack.length||(l.cont.css("zIndex",s+1),this.util.switchClass.call(l.layer,"close","open"),l.cont.removeClass("close")),p.call(this),-1===o.inArray(this,l.stack)&&l.stack.unshift(this),this.resize(),h.open.call(this),d.call(this),this.options.open.success.call(this)},x=function(t,s){t=t||o(l.stack).index(this),!l.stack.length||0>t||(this.state="close",this.options.model[0].model=this,l.stack.splice(t,1),n&&!s&&this.options.open.anim?h.close.call(this):f.call(this),l.stack.length||this.util.switchClass.call(l.layer,"open","close"))},z=function(t){function o(t,o){var s=o.data("model");s&&s.options&&s.options.model[0]===t.model[0]&&y.call(this),t.trigger=o,g.call(this,t)}var n=function(){};n.prototype=s;var e=new n;return e.pluginName=t,o.prototype=e,o};return{isTransitionEndSupported:n,pluginName:"",state:"close",util:e,lt:l,reInit:y,close_returnFocus:u,getNewModel:z,open:_,close:x,on:k,off:w,resize:C,default_opt:i,init_structure:r,closeTransEnd_cb:f}}();!function(t){var o="drawer",n={dir:"right",open:{anim:"sideIn"},zLayer:!1,close:{anim:"sideOut"}},e=s.getNewModel(o);e.prototype.default_opt=t.extend(!0,{},s.default_opt,n),e.prototype.init_structure=function(){s.init_structure.call(this),this.options.model.addClass(this.options.dir)},e.prototype.resize=function(){parseInt(t("body").css("minHeight")||0),s.lt.cont.css({width:"auto",height:"auto"});var o=t(window).height(),n=t(document).width();s.lt.cont.css({width:n+"px",height:o+"px"})};var i=function(){s.open.call(this),t("html,body").addClass("drawerDisableScroll")},l=function(){s.close.call(this),0==s.lt.stack.length&&t("html,body").removeClass("drawerDisableScroll")};t.fn.drawer=function(o){var n=null,c=null;if(s.util.is_options_valid(o)){t.each(this,function(s,a){var r=t(a);n=new e(o,r),n.open=function(){i.call(n)},n.close=function(){l.call(n)},c={open:n.open,close:n.close,on:function(){n.on()},off:function(){n.off()}},r[0].model=c});var a=o.model;a.on(s.isTransitionEndSupported,function(){a.hasClass(n.options.close.anim)&&s.closeTransEnd_cb.call(a[0].model)})}return this[0].model||n}}(Zepto)});